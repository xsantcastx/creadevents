<section class="home-hero section-stack relative overflow-hidden flex items-center h-[85vh]">
  @if (rotatingImages.length > 0) {
    <!-- Image Carousel Background -->
    @for (image of rotatingImages; track image.id; let i = $index) {
      <div 
        class="absolute inset-0 transition-opacity duration-1000"
        [class.opacity-100]="currentImageIndex === i"
        [class.opacity-0]="currentImageIndex !== i">
        <!-- Background Image with Overlay -->
        <div class="absolute inset-0">
          @if (image.webpUrl) {
            <picture>
              <source [srcset]="image.webpUrl" type="image/webp">
              <img 
                [src]="image.url" 
                [alt]="image.alt"
                class="w-full h-full object-cover animate-ken-burns"
                loading="lazy">
            </picture>
          } @else {
            <img 
              [src]="image.url" 
              [alt]="image.alt"
              class="w-full h-full object-cover animate-ken-burns"
              loading="lazy">
          }
          <!-- Lighter overlay to show images better -->
          <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-black/50"></div>
        </div>
      </div>
    }
  } @else {
    <!-- Fallback gradient background when no images -->
    <div class="absolute inset-0 bg-gradient-to-b from-[#0a0b0d] via-[#13151a] to-[#0a0b0d]"></div>
  }
  
  <!-- Subtle animated gradient overlay -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute inset-0" style="background: radial-gradient(circle at 30% 50%, rgba(216, 201, 166, 0.1) 0%, transparent 50%), radial-gradient(circle at 70% 50%, rgba(216, 201, 166, 0.08) 0%, transparent 50%);"></div>
  </div>
  
  <div class="page-container relative z-10">
    <div class="max-w-xl mx-auto">
      <!-- Compact Card Container -->
      <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-xl p-5 md:p-7 border border-ts-accent/20 animate-fade-in-up hover:shadow-2xl hover:scale-105 transition-all duration-500 hover:bg-white/95">
        <!-- Logo Badge -->
        <div class="inline-flex items-center gap-2 mb-3 px-3 py-1.5 rounded-full bg-ts-accent/10 border border-ts-accent/30 hover:bg-ts-accent/20 transition-colors duration-300">
          <img src="/Logo Clear.png" alt="Brand Logo" width="24" height="24" class="h-6 w-6 rounded" />
          <span class="text-xs text-ts-ink font-semibold">{{ 'home.hero.badge' | translate }}</span>
        </div>
        
        @if (rotatingImages.length > 0 && rotatingImages[currentImageIndex]) {
          <!-- Dynamic content from hero images -->
          <h1 class="text-2xl md:text-3xl font-serif font-bold mb-2 leading-tight text-ts-ink">
            {{ rotatingImages[currentImageIndex].title }}
          </h1>
          
          <p class="text-sm md:text-base text-ts-ink/80 mb-3 leading-relaxed">
            {{ rotatingImages[currentImageIndex].description }}
          </p>
        } @else {
          <!-- Static fallback content -->
          <h1 class="text-2xl md:text-3xl font-serif font-bold mb-2 leading-tight text-ts-ink">
            {{ 'home.hero.fallback_title' | translate }}
          </h1>
          
          <p class="text-sm md:text-base text-ts-ink/80 mb-3 leading-relaxed">
            {{ 'home.hero.fallback_subtitle' | translate }}
          </p>
        }
        
        <!-- Image Navigation Dots (only show if multiple images) -->
        @if (rotatingImages.length > 1) {
          <div class="flex items-center justify-center gap-2 mb-3">
            @for (image of rotatingImages; track image.id; let i = $index) {
              <button
                (click)="goToImage(i)"
                class="w-1.5 h-1.5 rounded-full transition-all hover:scale-125"
                [class.bg-ts-accent]="currentImageIndex === i"
                [class.w-5]="currentImageIndex === i"
                [class.bg-ts-ink/30]="currentImageIndex !== i"
                [attr.aria-label]="'Image ' + (i + 1)">
              </button>
            }
          </div>
        }
        
        <!-- Compact Trust Badges -->
        <div class="flex items-center justify-center gap-4 pt-3 border-t border-ts-accent/20">
          <div class="flex items-center gap-1.5">
            <svg class="w-4 h-4 text-ts-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
            <span class="text-xs font-semibold text-ts-ink">{{ 'home.hero.trust_badges.family_owned' | translate }}</span>
          </div>
          
          <div class="flex items-center gap-1.5">
            <svg class="w-4 h-4 text-ts-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
            <span class="text-xs font-semibold text-ts-ink">{{ 'home.hero.trust_badges.years_experience' | translate }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scroll indicator with click to scroll -->
  <button 
    (click)="scrollToNextSection()"
    class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer bg-transparent border-none p-2 hover:scale-110 transition-transform"
    aria-label="Scroll to next section">
    <svg class="w-6 h-6 text-white/70 hover:text-white/90 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </button>
</section>
